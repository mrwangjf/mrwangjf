!function(e){function t(){p=null,m.last&&(m.el.trigger("longTap"),m={})}function o(){p&&clearTimeout(p),p=null}function n(){r&&clearTimeout(r),a&&clearTimeout(a),l&&clearTimeout(l),p&&clearTimeout(p),r=a=l=p=null,m={}}function i(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function u(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}function c(c){var y,v,M,b,x=0,P=0;T&&(e(document).off(w.down,d).off(w.up,g).off(w.move,f).off(w.cancel,n),e(window).off("scroll",n),n(),T=!1),(w=c&&"down"in c?c:"ontouchstart"in document?{down:"touchstart",up:"touchend",move:"touchmove",cancel:"touchcancel"}:"onpointerdown"in document?{down:"pointerdown",up:"pointerup",move:"pointermove",cancel:"pointercancel"}:"onmspointerdown"in document&&{down:"MSPointerDown",up:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel"})&&("MSGesture"in window&&((s=new MSGesture).target=document.body,e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(m.el.trigger("swipe"),m.el.trigger("swipe"+t))})),d=function(o){(b=u(o,"down"))&&!i(o)||(M=b?o:o.touches[0],o.touches&&1===o.touches.length&&m.x2&&(m.x2=void 0,m.y2=void 0),y=Date.now(),v=y-(m.last||y),m.el=e("tagName"in M.target?M.target:M.target.parentNode),r&&clearTimeout(r),m.x1=M.pageX,m.y1=M.pageY,v>0&&v<=250&&(m.isDoubleTap=!0),m.last=y,p=setTimeout(t,h),s&&b&&s.addPointer(o.pointerId))},f=function(e){(b=u(e,"move"))&&!i(e)||(M=b?e:e.touches[0],o(),m.x2=M.pageX,m.y2=M.pageY,x+=Math.abs(m.x1-m.x2),P+=Math.abs(m.y1-m.y2))},g=function(t){(b=u(t,"up"))&&!i(t)||(o(),m.x2&&Math.abs(m.x1-m.x2)>30||m.y2&&Math.abs(m.y1-m.y2)>30?l=setTimeout(function(){m.el&&(m.el.trigger("swipe"),m.el.trigger("swipe"+function(e,t,o,n){return Math.abs(e-t)>=Math.abs(o-n)?e-t>0?"Left":"Right":o-n>0?"Up":"Down"}(m.x1,m.x2,m.y1,m.y2))),m={}},0):"last"in m&&(x<30&&P<30?a=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=n,m.el&&m.el.trigger(t),m.isDoubleTap?(m.el&&m.el.trigger("doubleTap"),m={}):r=setTimeout(function(){r=null,m.el&&m.el.trigger("singleTap"),m={}},250)},0):m={}),x=P=0)},e(document).on(w.up,g).on(w.down,d).on(w.move,f),e(document).on(w.cancel,n),e(window).on("scroll",n),T=!0)}var r,a,l,p,s,d,g,f,w,m={},h=750,T=!1;["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}}),e.touch={setup:c},e(document).ready(c)}(Zepto);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInplcHRvLXRvdWNoLmpzIl0sIm5hbWVzIjpbIiQiLCJsb25nVGFwIiwibG9uZ1RhcFRpbWVvdXQiLCJ0b3VjaCIsImxhc3QiLCJlbCIsInRyaWdnZXIiLCJjYW5jZWxMb25nVGFwIiwiY2xlYXJUaW1lb3V0IiwiY2FuY2VsQWxsIiwidG91Y2hUaW1lb3V0IiwidGFwVGltZW91dCIsInN3aXBlVGltZW91dCIsImlzUHJpbWFyeVRvdWNoIiwiZXZlbnQiLCJwb2ludGVyVHlwZSIsIk1TUE9JTlRFUl9UWVBFX1RPVUNIIiwiaXNQcmltYXJ5IiwiaXNQb2ludGVyRXZlbnRUeXBlIiwiZSIsInR5cGUiLCJ0b0xvd2VyQ2FzZSIsInNldHVwIiwiX19ldmVudE1hcCIsIm5vdyIsImRlbHRhIiwiZmlyc3RUb3VjaCIsIl9pc1BvaW50ZXJUeXBlIiwiZGVsdGFYIiwiZGVsdGFZIiwiaW5pdGlhbGl6ZWQiLCJkb2N1bWVudCIsIm9mZiIsImV2ZW50TWFwIiwiZG93biIsInVwIiwibW92ZSIsImNhbmNlbCIsIndpbmRvdyIsImdlc3R1cmUiLCJNU0dlc3R1cmUiLCJ0YXJnZXQiLCJib2R5IiwiYmluZCIsInN3aXBlRGlyZWN0aW9uRnJvbVZlbG9jaXR5IiwidmVsb2NpdHlYIiwidmVsb2NpdHlZIiwidG91Y2hlcyIsImxlbmd0aCIsIngyIiwidW5kZWZpbmVkIiwieTIiLCJEYXRlIiwicGFyZW50Tm9kZSIsIngxIiwicGFnZVgiLCJ5MSIsInBhZ2VZIiwiaXNEb3VibGVUYXAiLCJzZXRUaW1lb3V0IiwibG9uZ1RhcERlbGF5IiwiYWRkUG9pbnRlciIsInBvaW50ZXJJZCIsIk1hdGgiLCJhYnMiLCJFdmVudCIsImNhbmNlbFRvdWNoIiwib24iLCJmb3JFYWNoIiwiZXZlbnROYW1lIiwiZm4iLCJjYWxsYmFjayIsInRoaXMiLCJyZWFkeSIsIlplcHRvIl0sIm1hcHBpbmdzIjoiQ0FDQyxTQUFVQSxHQVlYLFNBQVNDLElBQ1RDLEVBQWlCLEtBQ2JDLEVBQU1DLE9BQ1ZELEVB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LEdBQUdsQyxFQUFTQyxLQUFNQSxHQUNsQmlDLEdBQUdsQyxFQUFTRyxLQUFNQSxHQUluQnBDLEVBQUUrQixVQUFVb0MsR0FBR2xDLEVBQVNJLE9BQVE1QixHQUdoQ1QsRUFBRXNDLFFBQVE2QixHQUFHLFNBQVUxRCxHQUN2QnFCLEdBQWMsR0F4S2QsSUFDQXBCLEVBQWNDLEVBQVlDLEVBQWNWLEVBRXhDcUMsRUFDQUwsRUFBTUMsRUFBSUMsRUFDVkgsRUFMSTlCLEtBRUp5RCxFQUFlLElBSWY5QixHQUFjLEdBb0taLFFBQVMsWUFBYSxhQUFjLFVBQVcsWUFDakQsWUFBYSxNQUFPLFlBQWEsV0FBV3NDLFFBQVEsU0FBU0MsR0FDN0RyRSxFQUFFc0UsR0FBR0QsR0FBYSxTQUFTRSxHQUFXLE9BQU9DLEtBQUtMLEdBQUdFLEVBQVdFLE1BRWhFdkUsRUFBRUcsT0FBVW1CLE1BQU9BLEdBQ25CdEIsRUFBRStCLFVBQVUwQyxNQUFNbkQsR0FoTGpCLENBaUxFb0QiLCJmaWxlIjoiemVwdG8tdG91Y2guanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+WcqOinpuaRuOiuvuWkh+S4iuinpuWPkXRhcOKAkyDlkowgc3dpcGXigJMg55u45YWz5LqL5Lu244CC6L+Z6YCC55So5LqO5omA5pyJ55qEYHRvdWNoYChpT1MsIEFuZHJvaWQp5ZKMYHBvaW50ZXJg5LqL5Lu2KFdpbmRvd3MgUGhvbmUp44CCXHJcbjsoZnVuY3Rpb24oJCl7XHJcbnZhciB0b3VjaCA9IHt9LFxyXG50b3VjaFRpbWVvdXQsIHRhcFRpbWVvdXQsIHN3aXBlVGltZW91dCwgbG9uZ1RhcFRpbWVvdXQsXHJcbmxvbmdUYXBEZWxheSA9IDc1MCxcclxuZ2VzdHVyZSxcclxuZG93biwgdXAsIG1vdmUsXHJcbmV2ZW50TWFwLFxyXG5pbml0aWFsaXplZCA9IGZhbHNlXHJcbmZ1bmN0aW9uIHN3aXBlRGlyZWN0aW9uKHgxLCB4MiwgeTEsIHkyKSB7XHJcbnJldHVybiBNYXRoLmFicyh4MSAtIHgyKSA+PVxyXG5NYXRoLmFicyh5MSAtIHkyKSA/ICh4MSAtIHgyID4gMCA/ICdMZWZ0JyA6ICdSaWdodCcpIDogKHkxIC0geTIgPiAwID8gJ1VwJyA6ICdEb3duJylcclxufVxyXG5mdW5jdGlvbiBsb25nVGFwKCkge1xyXG5sb25nVGFwVGltZW91dCA9IG51bGxcclxuaWYgKHRvdWNoLmxhc3QpIHtcclxudG91Y2guZWwudHJpZ2dlcignbG9uZ1RhcCcpXHJcbnRvdWNoID0ge31cclxufVxyXG59XHJcbmZ1bmN0aW9uIGNhbmNlbExvbmdUYXAoKSB7XHJcbmlmIChsb25nVGFwVGltZW91dCkgY2xlYXJUaW1lb3V0KGxvbmdUYXBUaW1lb3V0KVxyXG5sb25nVGFwVGltZW91dCA9IG51bGxcclxufVxyXG5mdW5jdGlvbiBjYW5jZWxBbGwoKSB7XHJcbmlmICh0b3VjaFRpbWVvdXQpIGNsZWFyVGltZW91dCh0b3VjaFRpbWVvdXQpXHJcbmlmICh0YXBUaW1lb3V0KSBjbGVhclRpbWVvdXQodGFwVGltZW91dClcclxuaWYgKHN3aXBlVGltZW91dCkgY2xlYXJUaW1lb3V0KHN3aXBlVGltZW91dClcclxuaWYgKGxvbmdUYXBUaW1lb3V0KSBjbGVhclRpbWVvdXQobG9uZ1RhcFRpbWVvdXQpXHJcbnRvdWNoVGltZW91dCA9IHRhcFRpbWVvdXQgPSBzd2lwZVRpbWVvdXQgPSBsb25nVGFwVGltZW91dCA9IG51bGxcclxudG91Y2ggPSB7fVxyXG59XHJcbmZ1bmN0aW9uIGlzUHJpbWFyeVRvdWNoKGV2ZW50KXtcclxucmV0dXJuIChldmVudC5wb2ludGVyVHlwZSA9PSAndG91Y2gnIHx8XHJcbmV2ZW50LnBvaW50ZXJUeXBlID09IGV2ZW50Lk1TUE9JTlRFUl9UWVBFX1RPVUNIKVxyXG4mJiBldmVudC5pc1ByaW1hcnlcclxufVxyXG5mdW5jdGlvbiBpc1BvaW50ZXJFdmVudFR5cGUoZSwgdHlwZSl7XHJcbnJldHVybiAoZS50eXBlID09ICdwb2ludGVyJyt0eXBlIHx8XHJcbmUudHlwZS50b0xvd2VyQ2FzZSgpID09ICdtc3BvaW50ZXInK3R5cGUpXHJcbn1cclxuLy8gaGVscGVyIGZ1bmN0aW9uIGZvciB0ZXN0cywgc28gdGhleSBjaGVjayBmb3IgZGlmZmVyZW50IEFQSXNcclxuZnVuY3Rpb24gdW5yZWdpc3RlclRvdWNoRXZlbnRzKCl7XHJcbmlmICghaW5pdGlhbGl6ZWQpIHJldHVyblxyXG4kKGRvY3VtZW50KS5vZmYoZXZlbnRNYXAuZG93biwgZG93bilcclxuLm9mZihldmVudE1hcC51cCwgdXApXHJcbi5vZmYoZXZlbnRNYXAubW92ZSwgbW92ZSlcclxuLm9mZihldmVudE1hcC5jYW5jZWwsIGNhbmNlbEFsbClcclxuJCh3aW5kb3cpLm9mZignc2Nyb2xsJywgY2FuY2VsQWxsKVxyXG5jYW5jZWxBbGwoKVxyXG5pbml0aWFsaXplZCA9IGZhbHNlXHJcbn1cclxuZnVuY3Rpb24gc2V0dXAoX19ldmVudE1hcCl7XHJcbnZhciBub3csIGRlbHRhLCBkZWx0YVggPSAwLCBkZWx0YVkgPSAwLCBmaXJzdFRvdWNoLCBfaXNQb2ludGVyVHlwZVxyXG51bnJlZ2lzdGVyVG91Y2hFdmVudHMoKVxyXG5ldmVudE1hcCA9IChfX2V2ZW50TWFwICYmICgnZG93bicgaW4gX19ldmVudE1hcCkpID8gX19ldmVudE1hcCA6XHJcbignb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudCA/XHJcbnsgJ2Rvd24nOiAndG91Y2hzdGFydCcsICd1cCc6ICd0b3VjaGVuZCcsXHJcbidtb3ZlJzogJ3RvdWNobW92ZScsICdjYW5jZWwnOiAndG91Y2hjYW5jZWwnIH0gOlxyXG4nb25wb2ludGVyZG93bicgaW4gZG9jdW1lbnQgP1xyXG57ICdkb3duJzogJ3BvaW50ZXJkb3duJywgJ3VwJzogJ3BvaW50ZXJ1cCcsXHJcbidtb3ZlJzogJ3BvaW50ZXJtb3ZlJywgJ2NhbmNlbCc6ICdwb2ludGVyY2FuY2VsJyB9IDpcclxuJ29ubXNwb2ludGVyZG93bicgaW4gZG9jdW1lbnQgP1xyXG57ICdkb3duJzogJ01TUG9pbnRlckRvd24nLCAndXAnOiAnTVNQb2ludGVyVXAnLFxyXG4nbW92ZSc6ICdNU1BvaW50ZXJNb3ZlJywgJ2NhbmNlbCc6ICdNU1BvaW50ZXJDYW5jZWwnIH0gOiBmYWxzZSlcclxuLy8gTm8gQVBJIGF2YWlsYWJsZXMgZm9yIHRvdWNoIGV2ZW50c1xyXG5pZiAoIWV2ZW50TWFwKSByZXR1cm5cclxuaWYgKCdNU0dlc3R1cmUnIGluIHdpbmRvdykge1xyXG5nZXN0dXJlID0gbmV3IE1TR2VzdHVyZSgpXHJcbmdlc3R1cmUudGFyZ2V0ID0gZG9jdW1lbnQuYm9keVxyXG4kKGRvY3VtZW50KVxyXG4uYmluZCgnTVNHZXN0dXJlRW5kJywgZnVuY3Rpb24oZSl7XHJcbnZhciBzd2lwZURpcmVjdGlvbkZyb21WZWxvY2l0eSA9XHJcbmUudmVsb2NpdHlYID4gMSA/ICdSaWdodCcgOiBlLnZlbG9jaXR5WCA8IC0xID8gJ0xlZnQnIDogZS52ZWxvY2l0eVkgPiAxID8gJ0Rvd24nIDogZS52ZWxvY2l0eVkgPCAtMSA/ICdVcCcgOiBudWxsXHJcbmlmIChzd2lwZURpcmVjdGlvbkZyb21WZWxvY2l0eSkge1xyXG50b3VjaC5lbC50cmlnZ2VyKCdzd2lwZScpXHJcbnRvdWNoLmVsLnRyaWdnZXIoJ3N3aXBlJysgc3dpcGVEaXJlY3Rpb25Gcm9tVmVsb2NpdHkpXHJcbn1cclxufSlcclxufVxyXG5kb3duID0gZnVuY3Rpb24oZSl7XHJcbmlmKChfaXNQb2ludGVyVHlwZSA9IGlzUG9pbnRlckV2ZW50VHlwZShlLCAnZG93bicpKSAmJlxyXG4haXNQcmltYXJ5VG91Y2goZSkpIHJldHVyblxyXG5maXJzdFRvdWNoID0gX2lzUG9pbnRlclR5cGUgPyBlIDogZS50b3VjaGVzWzBdXHJcbmlmIChlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA9PT0gMSAmJiB0b3VjaC54Mikge1xyXG4vLyBDbGVhciBvdXQgdG91Y2ggbW92ZW1lbnQgZGF0YSBpZiB3ZSBoYXZlIGl0IHN0aWNraW5nIGFyb3VuZFxyXG4vLyBUaGlzIGNhbiBvY2N1ciBpZiB0b3VjaGNhbmNlbCBkb2Vzbid0IGZpcmUgZHVlIHRvIHByZXZlbnREZWZhdWx0LCBldGMuXHJcbnRvdWNoLngyID0gdW5kZWZpbmVkXHJcbnRvdWNoLnkyID0gdW5kZWZpbmVkXHJcbn1cclxubm93ID0gRGF0ZS5ub3coKVxyXG5kZWx0YSA9IG5vdyAtICh0b3VjaC5sYXN0IHx8IG5vdylcclxudG91Y2guZWwgPSAkKCd0YWdOYW1lJyBpbiBmaXJzdFRvdWNoLnRhcmdldCA/XHJcbmZpcnN0VG91Y2gudGFyZ2V0IDogZmlyc3RUb3VjaC50YXJnZXQucGFyZW50Tm9kZSlcclxudG91Y2hUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0b3VjaFRpbWVvdXQpXHJcbnRvdWNoLngxID0gZmlyc3RUb3VjaC5wYWdlWFxyXG50b3VjaC55MSA9IGZpcnN0VG91Y2gucGFnZVlcclxuaWYgKGRlbHRhID4gMCAmJiBkZWx0YSA8PSAyNTApIHRvdWNoLmlzRG91YmxlVGFwID0gdHJ1ZVxyXG50b3VjaC5sYXN0ID0gbm93XHJcbmxvbmdUYXBUaW1lb3V0ID0gc2V0VGltZW91dChsb25nVGFwLCBsb25nVGFwRGVsYXkpXHJcbi8vIGFkZHMgdGhlIGN1cnJlbnQgdG91Y2ggY29udGFjdCBmb3IgSUUgZ2VzdHVyZSByZWNvZ25pdGlvblxyXG5pZiAoZ2VzdHVyZSAmJiBfaXNQb2ludGVyVHlwZSkgZ2VzdHVyZS5hZGRQb2ludGVyKGUucG9pbnRlcklkKVxyXG59XHJcbm1vdmUgPSBmdW5jdGlvbihlKXtcclxuaWYoKF9pc1BvaW50ZXJUeXBlID0gaXNQb2ludGVyRXZlbnRUeXBlKGUsICdtb3ZlJykpICYmXHJcbiFpc1ByaW1hcnlUb3VjaChlKSkgcmV0dXJuXHJcbmZpcnN0VG91Y2ggPSBfaXNQb2ludGVyVHlwZSA/IGUgOiBlLnRvdWNoZXNbMF1cclxuY2FuY2VsTG9uZ1RhcCgpXHJcbnRvdWNoLngyID0gZmlyc3RUb3VjaC5wYWdlWFxyXG50b3VjaC55MiA9IGZpcnN0VG91Y2gucGFnZVlcclxuZGVsdGFYICs9IE1hdGguYWJzKHRvdWNoLngxIC0gdG91Y2gueDIpXHJcbmRlbHRhWSArPSBNYXRoLmFicyh0b3VjaC55MSAtIHRvdWNoLnkyKVxyXG59XHJcbnVwID0gZnVuY3Rpb24oZSl7XHJcbmlmKChfaXNQb2ludGVyVHlwZSA9IGlzUG9pbnRlckV2ZW50VHlwZShlLCAndXAnKSkgJiZcclxuIWlzUHJpbWFyeVRvdWNoKGUpKSByZXR1cm5cclxuY2FuY2VsTG9uZ1RhcCgpXHJcbi8vIHN3aXBlXHJcbmlmICgodG91Y2gueDIgJiYgTWF0aC5hYnModG91Y2gueDEgLSB0b3VjaC54MikgPiAzMCkgfHxcclxuKHRvdWNoLnkyICYmIE1hdGguYWJzKHRvdWNoLnkxIC0gdG91Y2gueTIpID4gMzApKVxyXG5zd2lwZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5pZiAodG91Y2guZWwpe1xyXG50b3VjaC5lbC50cmlnZ2VyKCdzd2lwZScpXHJcbnRvdWNoLmVsLnRyaWdnZXIoJ3N3aXBlJyArIChzd2lwZURpcmVjdGlvbih0b3VjaC54MSwgdG91Y2gueDIsIHRvdWNoLnkxLCB0b3VjaC55MikpKVxyXG59XHJcbnRvdWNoID0ge31cclxufSwgMClcclxuLy8gbm9ybWFsIHRhcFxyXG5lbHNlIGlmICgnbGFzdCcgaW4gdG91Y2gpXHJcbi8vIGRvbid0IGZpcmUgdGFwIHdoZW4gZGVsdGEgcG9zaXRpb24gY2hhbmdlZCBieSBtb3JlIHRoYW4gMzAgcGl4ZWxzLFxyXG4vLyBmb3IgaW5zdGFuY2Ugd2hlbiBtb3ZpbmcgdG8gYSBwb2ludCBhbmQgYmFjayB0byBvcmlnaW5cclxuaWYgKGRlbHRhWCA8IDMwICYmIGRlbHRhWSA8IDMwKSB7XHJcbi8vIGRlbGF5IGJ5IG9uZSB0aWNrIHNvIHdlIGNhbiBjYW5jZWwgdGhlICd0YXAnIGV2ZW50IGlmICdzY3JvbGwnIGZpcmVzXHJcbi8vICgndGFwJyBmaXJlcyBiZWZvcmUgJ3Njcm9sbCcpXHJcbnRhcFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4vLyB0cmlnZ2VyIHVuaXZlcnNhbCAndGFwJyB3aXRoIHRoZSBvcHRpb24gdG8gY2FuY2VsVG91Y2goKVxyXG4vLyAoY2FuY2VsVG91Y2ggY2FuY2VscyBwcm9jZXNzaW5nIG9mIHNpbmdsZSB2cyBkb3VibGUgdGFwcyBmb3IgZmFzdGVyICd0YXAnIHJlc3BvbnNlKVxyXG52YXIgZXZlbnQgPSAkLkV2ZW50KCd0YXAnKVxyXG5ldmVudC5jYW5jZWxUb3VjaCA9IGNhbmNlbEFsbFxyXG4vLyBbYnkgcGFwZXJdIGZpeCAtPiBcIlR5cGVFcnJvcjogJ3VuZGVmaW5lZCcgaXMgbm90IGFuIG9iamVjdCAoZXZhbHVhdGluZyAndG91Y2guZWwudHJpZ2dlcicpLCB3aGVuIGRvdWJsZSB0YXBcclxuaWYgKHRvdWNoLmVsKSB0b3VjaC5lbC50cmlnZ2VyKGV2ZW50KVxyXG4vLyB0cmlnZ2VyIGRvdWJsZSB0YXAgaW1tZWRpYXRlbHlcclxuaWYgKHRvdWNoLmlzRG91YmxlVGFwKSB7XHJcbmlmICh0b3VjaC5lbCkgdG91Y2guZWwudHJpZ2dlcignZG91YmxlVGFwJylcclxudG91Y2ggPSB7fVxyXG59XHJcbi8vIHRyaWdnZXIgc2luZ2xlIHRhcCBhZnRlciAyNTBtcyBvZiBpbmFjdGl2aXR5XHJcbmVsc2Uge1xyXG50b3VjaFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbnRvdWNoVGltZW91dCA9IG51bGxcclxuaWYgKHRvdWNoLmVsKSB0b3VjaC5lbC50cmlnZ2VyKCdzaW5nbGVUYXAnKVxyXG50b3VjaCA9IHt9XHJcbn0sIDI1MClcclxufVxyXG59LCAwKVxyXG59IGVsc2Uge1xyXG50b3VjaCA9IHt9XHJcbn1cclxuZGVsdGFYID0gZGVsdGFZID0gMFxyXG59XHJcbiQoZG9jdW1lbnQpLm9uKGV2ZW50TWFwLnVwLCB1cClcclxuLm9uKGV2ZW50TWFwLmRvd24sIGRvd24pXHJcbi5vbihldmVudE1hcC5tb3ZlLCBtb3ZlKVxyXG4vLyB3aGVuIHRoZSBicm93c2VyIHdpbmRvdyBsb3NlcyBmb2N1cyxcclxuLy8gZm9yIGV4YW1wbGUgd2hlbiBhIG1vZGFsIGRpYWxvZyBpcyBzaG93bixcclxuLy8gY2FuY2VsIGFsbCBvbmdvaW5nIGV2ZW50c1xyXG4kKGRvY3VtZW50KS5vbihldmVudE1hcC5jYW5jZWwsIGNhbmNlbEFsbClcclxuLy8gc2Nyb2xsaW5nIHRoZSB3aW5kb3cgaW5kaWNhdGVzIGludGVudGlvbiBvZiB0aGUgdXNlclxyXG4vLyB0byBzY3JvbGwsIG5vdCB0YXAgb3Igc3dpcGUsIHNvIGNhbmNlbCBhbGwgb25nb2luZyBldmVudHNcclxuJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBjYW5jZWxBbGwpXHJcbmluaXRpYWxpemVkID0gdHJ1ZVxyXG59XHJcbjtbJ3N3aXBlJywgJ3N3aXBlTGVmdCcsICdzd2lwZVJpZ2h0JywgJ3N3aXBlVXAnLCAnc3dpcGVEb3duJyxcclxuJ2RvdWJsZVRhcCcsICd0YXAnLCAnc2luZ2xlVGFwJywgJ2xvbmdUYXAnXS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50TmFtZSl7XHJcbiQuZm5bZXZlbnROYW1lXSA9IGZ1bmN0aW9uKGNhbGxiYWNrKXsgcmV0dXJuIHRoaXMub24oZXZlbnROYW1lLCBjYWxsYmFjaykgfVxyXG59KVxyXG4kLnRvdWNoID0geyBzZXR1cDogc2V0dXAgfVxyXG4kKGRvY3VtZW50KS5yZWFkeShzZXR1cClcclxufSkoWmVwdG8pIl19
