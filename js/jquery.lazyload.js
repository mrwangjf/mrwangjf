!function(e,t,i,o){var n=e(t);e.fn.lazyload=function(o){function r(){var t=0;l.each(function(){var i=e(this);if(!a.skip_invisible||i.is(":visible"))if(e.abovethetop(this,a)||e.leftofbegin(this,a));else if(e.belowthefold(this,a)||e.rightoffold(this,a)){if(++t>a.failure_limit)return!1}else i.trigger("appear"),t=0})}var f,l=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return o&&(void 0!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),void 0!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),e.extend(a,o)),f=void 0===a.container||a.container===t?n:e(a.container),0===a.event.indexOf("scroll")&&f.bind(a.event,function(){return r()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,void 0!==i.attr("src")&&!1!==i.attr("src")||i.is("img")&&i.attr("src",a.placeholder),i.one("appear",function(){if(!this.loaded){if(a.appear){var o=l.length;a.appear.call(t,o,a)}e("<img />").bind("load",function(){var o=i.attr("data-"+a.data_attribute);i.hide(),i.is("img")?i.attr("src",o):i.css("background-image","url('"+o+"')"),i[a.effect](a.effect_speed),t.loaded=!0;var n=e.grep(l,function(e){return!e.loaded});if(l=e(n),a.load){var r=l.length;a.load.call(t,r,a)}}).attr("src",i.attr("data-"+a.data_attribute))}}),0!==a.event.indexOf("scroll")&&i.bind(a.event,function(){t.loaded||i.trigger("appear")})}),n.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){r()}),this},e.belowthefold=function(i,o){return(void 0===o.container||o.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(o.container).offset().top+e(o.container).height())<=e(i).offset().top-o.threshold},e.rightoffold=function(i,o){return(void 0===o.container||o.container===t?n.width()+n.scrollLeft():e(o.container).offset().left+e(o.container).width())<=e(i).offset().left-o.threshold},e.abovethetop=function(i,o){return(void 0===o.container||o.container===t?n.scrollTop():e(o.container).offset().top)>=e(i).offset().top+o.threshold+e(i).height()},e.leftofbegin=function(i,o){return(void 0===o.container||o.container===t?n.scrollLeft():e(o.container).offset().left)>=e(i).offset().left+o.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5sYXp5bG9hZC5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiZG9jdW1lbnQiLCJ1bmRlZmluZWQiLCIkd2luZG93IiwiZm4iLCJsYXp5bG9hZCIsIm9wdGlvbnMiLCJ1cGRhdGUiLCJjb3VudGVyIiwiZWxlbWVudHMiLCJlYWNoIiwiJHRoaXMiLCJ0aGlzIiwic2V0dGluZ3MiLCJza2lwX2ludmlzaWJsZSIsImlzIiwiYWJvdmV0aGV0b3AiLCJsZWZ0b2ZiZWdpbiIsImJlbG93dGhlZm9sZCIsInJpZ2h0b2Zmb2xkIiwiZmFpbHVyZV9saW1pdCIsInRyaWdnZXIiLCIkY29udGFpbmVyIiwidGhyZXNob2xkIiwiZXZlbnQiLCJlZmZlY3QiLCJjb250YWluZXIiLCJkYXRhX2F0dHJpYnV0ZSIsImFwcGVhciIsImxvYWQiLCJwbGFjZWhvbGRlciIsImZhaWx1cmVsaW1pdCIsImVmZmVjdHNwZWVkIiwiZWZmZWN0X3NwZWVkIiwiZXh0ZW5kIiwiaW5kZXhPZiIsImJpbmQiLCJzZWxmIiwiJHNlbGYiLCJsb2FkZWQiLCJhdHRyIiwib25lIiwiZWxlbWVudHNfbGVmdCIsImxlbmd0aCIsImNhbGwiLCJvcmlnaW5hbCIsImhpZGUiLCJjc3MiLCJ0ZW1wIiwiZ3JlcCIsImVsZW1lbnQiLCJ0ZXN0IiwibmF2aWdhdG9yIiwiYXBwVmVyc2lvbiIsIm9yaWdpbmFsRXZlbnQiLCJwZXJzaXN0ZWQiLCJyZWFkeSIsImlubmVySGVpZ2h0IiwiaGVpZ2h0Iiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwid2lkdGgiLCJzY3JvbGxMZWZ0IiwibGVmdCIsImludmlld3BvcnQiLCJleHByIiwiYmVsb3ctdGhlLWZvbGQiLCJhIiwiYWJvdmUtdGhlLXRvcCIsInJpZ2h0LW9mLXNjcmVlbiIsImxlZnQtb2Ytc2NyZWVuIiwiaW4tdmlld3BvcnQiLCJhYm92ZS10aGUtZm9sZCIsInJpZ2h0LW9mLWZvbGQiLCJsZWZ0LW9mLWZvbGQiLCJqUXVlcnkiXSwibWFwcGlu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QUFTWSxTQUc5RS9ELEVBQUVrRSxXQUFhLFNBQVNmLEVBQVNyQyxHQUM1QixRQUFRZCxFQUFFb0IsWUFBWStCLEVBQVNyQyxJQUFjZCxFQUFFa0IsWUFBWWlDLEVBQVNyQyxJQUM1RGQsRUFBRW1CLGFBQWFnQyxFQUFTckMsSUFBY2QsRUFBRWlCLFlBQVlrQyxFQUFTckMsS0FPMUVkLEVBQUVtQyxPQUFPbkMsRUFBRW1FLEtBQUssTUFDWkMsaUJBQW1CLFNBQVNDLEdBQUssT0FBT3JFLEVBQUVtQixhQUFha0QsR0FBSTdDLFVBQVksS0FDdkU4QyxnQkFBbUIsU0FBU0QsR0FBSyxPQUFRckUsRUFBRW1CLGFBQWFrRCxHQUFJN0MsVUFBWSxLQUN4RStDLGtCQUFtQixTQUFTRixHQUFLLE9BQU9yRSxFQUFFb0IsWUFBWWlELEdBQUk3QyxVQUFZLEtBQ3RFZ0QsaUJBQW1CLFNBQVNILEdBQUssT0FBUXJFLEVBQUVvQixZQUFZaUQsR0FBSTdDLFVBQVksS0FDdkVpRCxjQUFtQixTQUFTSixHQUFLLE9BQU9yRSxFQUFFa0UsV0FBV0csR0FBSTdDLFVBQVksS0FFckVrRCxpQkFBbUIsU0FBU0wsR0FBSyxPQUFRckUsRUFBRW1CLGFBQWFrRCxHQUFJN0MsVUFBWSxLQUN4RW1ELGdCQUFtQixTQUFTTixHQUFLLE9BQU9yRSxFQUFFb0IsWUFBWWlELEdBQUk3QyxVQUFZLEtBQ3RFb0QsZUFBbUIsU0FBU1AsR0FBSyxPQUFRckUsRUFBRW9CLFlBQVlpRCxHQUFJN0MsVUFBWSxPQS9OL0UsQ0FrT0dxRCxPQUFRNUUsT0FBUUMiLCJmaWxlIjoianF1ZXJ5Lmxhenlsb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogTGF6eSBMb2FkIC0galF1ZXJ5IHBsdWdpbiBmb3IgbGF6eSBsb2FkaW5nIGltYWdlc1xyXG4gKlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDctMjAxMyBNaWthIFR1dXBvbGFcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxyXG4gKiAgIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcbiAqXHJcbiAqIFByb2plY3QgaG9tZTpcclxuICogICBodHRwOi8vd3d3LmFwcGVsc2lpbmkubmV0L3Byb2plY3RzL2xhenlsb2FkXHJcbiAqXHJcbiAqIFZlcnNpb246ICAxLjkuM1xyXG4gKlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcclxuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG5cclxuICAgICQuZm4ubGF6eWxvYWQgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcztcclxuICAgICAgICB2YXIgJGNvbnRhaW5lcjtcclxuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgIHRocmVzaG9sZCAgICAgICA6IDAsXHJcbiAgICAgICAgICAgIGZhaWx1cmVfbGltaXQgICA6IDAsXHJcbiAgICAgICAgICAgIGV2ZW50ICAgICAgICAgICA6IFwic2Nyb2xsXCIsXHJcbiAgICAgICAgICAgIGVmZmVjdCAgICAgICAgICA6IFwic2hvd1wiLFxyXG4gICAgICAgICAgICBjb250YWluZXIgICAgICAgOiB3aW5kb3csXHJcbiAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlICA6IFwib3JpZ2luYWxcIixcclxuICAgICAgICAgICAgc2tpcF9pbnZpc2libGUgIDogdHJ1ZSxcclxuICAgICAgICAgICAgYXBwZWFyICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgbG9hZCAgICAgICAgICAgIDogbnVsbCxcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXIgICAgIDogXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNRQUFBN0VBWlVyRGhzQUFBQU5TVVJCVkJoWFl6aDgrUEIvQUFmZkEwbk5QdUNMQUFBQUFFbEZUa1N1UW1DQ1wiXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlKCkge1xyXG4gICAgICAgICAgICB2YXIgY291bnRlciA9IDA7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5za2lwX2ludmlzaWJsZSAmJiAhJHRoaXMuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkLmFib3ZldGhldG9wKHRoaXMsIHNldHRpbmdzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICQubGVmdG9mYmVnaW4odGhpcywgc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIE5vdGhpbmcuICovXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCEkLmJlbG93dGhlZm9sZCh0aGlzLCBzZXR0aW5ncykgJiZcclxuICAgICAgICAgICAgICAgICAgICAhJC5yaWdodG9mZm9sZCh0aGlzLCBzZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJpZ2dlcihcImFwcGVhclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyogaWYgd2UgZm91bmQgYW4gaW1hZ2Ugd2UnbGwgbG9hZCwgcmVzZXQgdGhlIGNvdW50ZXIgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlciA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgrK2NvdW50ZXIgPiBzZXR0aW5ncy5mYWlsdXJlX2xpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgLyogTWFpbnRhaW4gQkMgZm9yIGEgY291cGxlIG9mIHZlcnNpb25zLiAqL1xyXG4gICAgICAgICAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmZhaWx1cmVsaW1pdCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5mYWlsdXJlX2xpbWl0ID0gb3B0aW9ucy5mYWlsdXJlbGltaXQ7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb3B0aW9ucy5mYWlsdXJlbGltaXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5lZmZlY3RzcGVlZCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5lZmZlY3Rfc3BlZWQgPSBvcHRpb25zLmVmZmVjdHNwZWVkO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9wdGlvbnMuZWZmZWN0c3BlZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQuZXh0ZW5kKHNldHRpbmdzLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIENhY2hlIGNvbnRhaW5lciBhcyBqUXVlcnkgYXMgb2JqZWN0LiAqL1xyXG4gICAgICAgICRjb250YWluZXIgPSAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSA/ICR3aW5kb3cgOiAkKHNldHRpbmdzLmNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIC8qIEZpcmUgb25lIHNjcm9sbCBldmVudCBwZXIgc2Nyb2xsLiBOb3Qgb25lIHNjcm9sbCBldmVudCBwZXIgaW1hZ2UuICovXHJcbiAgICAgICAgaWYgKDAgPT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcclxuICAgICAgICAgICAgJGNvbnRhaW5lci5iaW5kKHNldHRpbmdzLmV2ZW50LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJChzZWxmKTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYubG9hZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKiBJZiBubyBzcmMgYXR0cmlidXRlIGdpdmVuIHVzZSBkYXRhOnVyaS4gKi9cclxuICAgICAgICAgICAgaWYgKCRzZWxmLmF0dHIoXCJzcmNcIikgPT09IHVuZGVmaW5lZCB8fCAkc2VsZi5hdHRyKFwic3JjXCIpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzZWxmLmlzKFwiaW1nXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNlbGYuYXR0cihcInNyY1wiLCBzZXR0aW5ncy5wbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8qIFdoZW4gYXBwZWFyIGlzIHRyaWdnZXJlZCBsb2FkIG9yaWdpbmFsIGltYWdlLiAqL1xyXG4gICAgICAgICAgICAkc2VsZi5vbmUoXCJhcHBlYXJcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmFwcGVhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYXBwZWFyLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkKFwiPGltZyAvPlwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYmluZChcImxvYWRcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsID0gJHNlbGYuYXR0cihcImRhdGEtXCIgKyBzZXR0aW5ncy5kYXRhX2F0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNlbGYuaXMoXCJpbWdcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZi5hdHRyKFwic3JjXCIsIG9yaWdpbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybCgnXCIgKyBvcmlnaW5hbCArIFwiJylcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZltzZXR0aW5ncy5lZmZlY3RdKHNldHRpbmdzLmVmZmVjdF9zcGVlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJlbW92ZSBpbWFnZSBmcm9tIGFycmF5IHNvIGl0IGlzIG5vdCBsb29wZWQgbmV4dCB0aW1lLiAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSAkLmdyZXAoZWxlbWVudHMsIGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWVsZW1lbnQubG9hZGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyA9ICQodGVtcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHNfbGVmdCA9IGVsZW1lbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sb2FkLmNhbGwoc2VsZiwgZWxlbWVudHNfbGVmdCwgc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInNyY1wiLCAkc2VsZi5hdHRyKFwiZGF0YS1cIiArIHNldHRpbmdzLmRhdGFfYXR0cmlidXRlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyogV2hlbiB3YW50ZWQgZXZlbnQgaXMgdHJpZ2dlcmVkIGxvYWQgb3JpZ2luYWwgaW1hZ2UgKi9cclxuICAgICAgICAgICAgLyogYnkgdHJpZ2dlcmluZyBhcHBlYXIuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKDAgIT09IHNldHRpbmdzLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikpIHtcclxuICAgICAgICAgICAgICAgICRzZWxmLmJpbmQoc2V0dGluZ3MuZXZlbnQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5sb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGYudHJpZ2dlcihcImFwcGVhclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKiBDaGVjayBpZiBzb21ldGhpbmcgYXBwZWFycyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLiAqL1xyXG4gICAgICAgICR3aW5kb3cuYmluZChcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdXBkYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qIFdpdGggSU9TNSBmb3JjZSBsb2FkaW5nIGltYWdlcyB3aGVuIG5hdmlnYXRpbmcgd2l0aCBiYWNrIGJ1dHRvbi4gKi9cclxuICAgICAgICAvKiBOb24gb3B0aW1hbCB3b3JrYXJvdW5kLiAqL1xyXG4gICAgICAgIGlmICgoLyg/OmlwaG9uZXxpcG9kfGlwYWQpLipvcyA1L2dpKS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSkge1xyXG4gICAgICAgICAgICAkd2luZG93LmJpbmQoXCJwYWdlc2hvd1wiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgJiYgZXZlbnQub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoXCJhcHBlYXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogRm9yY2UgaW5pdGlhbCBjaGVjayBpZiBpbWFnZXMgc2hvdWxkIGFwcGVhci4gKi9cclxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdXBkYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiBDb252ZW5pZW5jZSBtZXRob2RzIGluIGpRdWVyeSBuYW1lc3BhY2UuICAgICAgICAgICAqL1xyXG4gICAgLyogVXNlIGFzICAkLmJlbG93dGhlZm9sZChlbGVtZW50LCB7dGhyZXNob2xkIDogMTAwLCBjb250YWluZXIgOiB3aW5kb3d9KSAqL1xyXG5cclxuICAgICQuYmVsb3d0aGVmb2xkID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZm9sZDtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAod2luZG93LmlubmVySGVpZ2h0ID8gd2luZG93LmlubmVySGVpZ2h0IDogJHdpbmRvdy5oZWlnaHQoKSkgKyAkd2luZG93LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wICsgJChzZXR0aW5ncy5jb250YWluZXIpLmhlaWdodCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgLSBzZXR0aW5ncy50aHJlc2hvbGQ7XHJcbiAgICB9O1xyXG5cclxuICAgICQucmlnaHRvZmZvbGQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBmb2xkO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MuY29udGFpbmVyID09PSB1bmRlZmluZWQgfHwgc2V0dGluZ3MuY29udGFpbmVyID09PSB3aW5kb3cpIHtcclxuICAgICAgICAgICAgZm9sZCA9ICR3aW5kb3cud2lkdGgoKSArICR3aW5kb3cuc2Nyb2xsTGVmdCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCArICQoc2V0dGluZ3MuY29udGFpbmVyKS53aWR0aCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGQgPD0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0IC0gc2V0dGluZ3MudGhyZXNob2xkO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmFib3ZldGhldG9wID0gZnVuY3Rpb24oZWxlbWVudCwgc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZm9sZDtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmNvbnRhaW5lciA9PT0gdW5kZWZpbmVkIHx8IHNldHRpbmdzLmNvbnRhaW5lciA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkd2luZG93LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvbGQgPSAkKHNldHRpbmdzLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS50b3AgKyBzZXR0aW5ncy50aHJlc2hvbGQgICsgJChlbGVtZW50KS5oZWlnaHQoKTtcclxuICAgIH07XHJcblxyXG4gICAgJC5sZWZ0b2ZiZWdpbiA9IGZ1bmN0aW9uKGVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgdmFyIGZvbGQ7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5jb250YWluZXIgPT09IHVuZGVmaW5lZCB8fCBzZXR0aW5ncy5jb250YWluZXIgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICBmb2xkID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9sZCA9ICQoc2V0dGluZ3MuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZvbGQgPj0gJChlbGVtZW50KS5vZmZzZXQoKS5sZWZ0ICsgc2V0dGluZ3MudGhyZXNob2xkICsgJChlbGVtZW50KS53aWR0aCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLmludmlld3BvcnQgPSBmdW5jdGlvbihlbGVtZW50LCBzZXR0aW5ncykge1xyXG4gICAgICAgICByZXR1cm4gISQucmlnaHRvZmZvbGQoZWxlbWVudCwgc2V0dGluZ3MpICYmICEkLmxlZnRvZmJlZ2luKGVsZW1lbnQsIHNldHRpbmdzKSAmJlxyXG4gICAgICAgICAgICAgICAgISQuYmVsb3d0aGVmb2xkKGVsZW1lbnQsIHNldHRpbmdzKSAmJiAhJC5hYm92ZXRoZXRvcChlbGVtZW50LCBzZXR0aW5ncyk7XHJcbiAgICAgfTtcclxuXHJcbiAgICAvKiBDdXN0b20gc2VsZWN0b3JzIGZvciB5b3VyIGNvbnZlbmllbmNlLiAgICovXHJcbiAgICAvKiBVc2UgYXMgJChcImltZzpiZWxvdy10aGUtZm9sZFwiKS5zb21ldGhpbmcoKSBvciAqL1xyXG4gICAgLyogJChcImltZ1wiKS5maWx0ZXIoXCI6YmVsb3ctdGhlLWZvbGRcIikuc29tZXRoaW5nKCkgd2hpY2ggaXMgZmFzdGVyICovXHJcblxyXG4gICAgJC5leHRlbmQoJC5leHByW1wiOlwiXSwge1xyXG4gICAgICAgIFwiYmVsb3ctdGhlLWZvbGRcIiA6IGZ1bmN0aW9uKGEpIHsgcmV0dXJuICQuYmVsb3d0aGVmb2xkKGEsIHt0aHJlc2hvbGQgOiAwfSk7IH0sXHJcbiAgICAgICAgXCJhYm92ZS10aGUtdG9wXCIgIDogZnVuY3Rpb24oYSkgeyByZXR1cm4gISQuYmVsb3d0aGVmb2xkKGEsIHt0aHJlc2hvbGQgOiAwfSk7IH0sXHJcbiAgICAgICAgXCJyaWdodC1vZi1zY3JlZW5cIjogZnVuY3Rpb24oYSkgeyByZXR1cm4gJC5yaWdodG9mZm9sZChhLCB7dGhyZXNob2xkIDogMH0pOyB9LFxyXG4gICAgICAgIFwibGVmdC1vZi1zY3JlZW5cIiA6IGZ1bmN0aW9uKGEpIHsgcmV0dXJuICEkLnJpZ2h0b2Zmb2xkKGEsIHt0aHJlc2hvbGQgOiAwfSk7IH0sXHJcbiAgICAgICAgXCJpbi12aWV3cG9ydFwiICAgIDogZnVuY3Rpb24oYSkgeyByZXR1cm4gJC5pbnZpZXdwb3J0KGEsIHt0aHJlc2hvbGQgOiAwfSk7IH0sXHJcbiAgICAgICAgLyogTWFpbnRhaW4gQkMgZm9yIGNvdXBsZSBvZiB2ZXJzaW9ucy4gKi9cclxuICAgICAgICBcImFib3ZlLXRoZS1mb2xkXCIgOiBmdW5jdGlvbihhKSB7IHJldHVybiAhJC5iZWxvd3RoZWZvbGQoYSwge3RocmVzaG9sZCA6IDB9KTsgfSxcclxuICAgICAgICBcInJpZ2h0LW9mLWZvbGRcIiAgOiBmdW5jdGlvbihhKSB7IHJldHVybiAkLnJpZ2h0b2Zmb2xkKGEsIHt0aHJlc2hvbGQgOiAwfSk7IH0sXHJcbiAgICAgICAgXCJsZWZ0LW9mLWZvbGRcIiAgIDogZnVuY3Rpb24oYSkgeyByZXR1cm4gISQucmlnaHRvZmZvbGQoYSwge3RocmVzaG9sZCA6IDB9KTsgfVxyXG4gICAgfSk7XHJcblxyXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iXX0=
